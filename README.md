# loan-countdown

하이브 빌드

```shell
flutter pub run build_runner build --delete-conflicting-outputs
```




formula1()
원리금 균등 분할 상환 방식에 사용된 계산식입니다. n제곱은 javascript에서 Math.pow로 구현할 수 있습니다.
M = P * r * (1 + r)^n / ((1 + r)^n - 1)
 
formula2()
원금 균등 분할 상환 방식에 사용된 계산식은 다음과 같습니다.
원금 균등 방식은 상환 원금이 일정합니다. 이를 위해 index가 1일 때에만 총 납부액 - 이자액을 통해 상환 원금을 산출해내어 계산했습니다.
M = P / n + (P * r)
 
formula3()
만기일시 상환 방식에 사용된 계산식은 다음과 같습니다.
대출 기간동안 매월 이자를 상환하고 마지막 회차에 대출원금과 이자를 한번에 상환하는 방식으로 index와 month가 같아질 때 상환 원금이 계산되도록 했습니다.
M = P * r

각 알파뱃 뜻이뭐고 어떻게 계산하는지 상세하게 알려줘 
ChatGPT의 말:
34s 동안 생각함

좋아! 각 기호 뜻과 “어떻게 계산하는지”를 세 가지 방식별로 깔끔하게 정리해줄게.

공통 기호 (모든 방식 공통)

P: 대출 원금(Loan Principal)

r: 월 이자율(연 5%면 r = 0.05 / 12)

퍼센트(%)가 아니라 소수로 넣기

n: 총 납입 횟수(개월 수, 예: 30년이면 30*12=360)

M: 매월 납입액(원리금 포함) — 방식에 따라 계산이 달라짐

t: 회차(1, 2, …, n)

Balance_t: t회차 납부 직후 남은 대출잔액

전제: 매월 말 납부(후불), 고정금리, 수수료/보험료 등은 제외.

1) 원리금 균등분할 상환 (Equal Payment / Annuity)

모든 달에 M(월 납입액) 이 동일하고, 안에서 원금/이자 비중만 달라져요.

월 납입액
𝑀
=
𝑃
⋅
𝑟
⋅
(
1
+
𝑟
)
𝑛
(
1
+
𝑟
)
𝑛
−
1
M=
(1+r)
n
−1
P⋅r⋅(1+r)
n
	​


r=0(무이자)이면 
𝑀
=
𝑃
/
𝑛
M=P/n

회차별 계산

이자액
𝑡
t
	​

 = 
Balance
𝑡
−
1
×
𝑟
Balance
t−1
	​

×r

원금상환액
𝑡
t
	​

 = 
𝑀
−
이자액
𝑡
M−이자액
t
	​


잔액: 
Balance
𝑡
=
Balance
𝑡
−
1
−
원금상환액
𝑡
Balance
t
	​

=Balance
t−1
	​

−원금상환액
t
	​


시작값: 
Balance
0
=
𝑃
Balance
0
	​

=P

특징: 초기엔 이자 비중이 크고, 갈수록 원금 비중이 커짐. 매달 내는 돈(M)은 변하지 않음.

2) 원금 균등 분할 상환 (Equal Principal)

매달 원금상환액이 일정하고, 이자는 잔액에 따라 줄어듭니다.

기본 원리

매달 원금상환액 = 
𝑃
/
𝑛
P/n (항상 동일)

이자액
𝑡
t
	​

 = 
Balance
𝑡
−
1
×
𝑟
Balance
t−1
	​

×r

월 납입액
𝑡
t
	​

 = 
𝑃
/
𝑛
+
이자액
𝑡
P/n+이자액
t
	​


잔액: 
Balance
𝑡
=
Balance
𝑡
−
1
−
𝑃
/
𝑛
Balance
t
	​

=Balance
t−1
	​

−P/n

시작값: 
Balance
0
=
𝑃
Balance
0
	​

=P

참고 (질문에 쓴 식 보정)

M = P / n + (P * r) 는 1회차(t=1) 월 납입액만을 의미합니다.
일반식은 회차에 따라

𝑀
𝑡
=
𝑃
𝑛
+
(
𝑃
−
(
𝑡
−
1
)
⋅
𝑃
𝑛
)
⋅
𝑟
M
t
	​

=
n
P
	​

+(P−(t−1)⋅
n
P
	​

)⋅r

가 됩니다.

특징: 초기에 납입액이 가장 크고 시간이 지날수록 줄어듦(이자 감소). 총이자 부담은 원리금균등보다 보통 적음.

3) 만기일시 상환 (Interest-Only with Balloon)

매달 이자만 내다가 마지막 회차에 원금을 한 번에 상환.

회차별 계산

t = 1 ~ n-1

이자액 = 
𝑃
×
𝑟
P×r

월 납입액 = 
𝑃
×
𝑟
P×r

잔액: 항상 
𝑃
P 유지

t = n(마지막)

월 납입액 = 
𝑃
×
𝑟
+
𝑃
P×r+P (이자 + 원금 전액)

잔액: 0

특징: 매달 부담은 가장 낮지만, 총이자 부담은 길게 가져가면 커질 수 있음. 마지막에 목돈 필요.

구현·실무 팁

JS 구현: 제곱은 Math.pow(1 + r, n) 사용.

반올림: 매 회차마다 원 단위 반올림(또는 절사/올림) 규칙을 정하고, 마지막 회차에서 잔액 보정 처리.

0% 금리: 원리금균등식은 0으로 나눔 오류 가능 → r===0 분기 후 M = P/n.

연이율 입력: 예) 4.5%라면 annual=0.045, r=annual/12.

중도상환(부분상환) 시: 그 시점 잔액 재계산 후 남은 회차/월 납입액 재산정 필요(방식별로 달라짐).

원하면 이 공식을 그대로 쓰는 **자바스크립트 스니펫(세 방식 모두 + 상환스케줄 생성)**도 바로 만들어줄게.